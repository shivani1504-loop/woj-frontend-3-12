"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68357],{272965:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var n=i(667294),o=i(545007),a=i(883119),s=i(161881),r=i(903591),_=i(53264),m=i(214877),l=i(976731),c=i(454514),d=i(140017),u=i(96452),p=i(13848),g=i(149722),f=i(413110),A=i(923368),h=i(930822),C=i(785893);function y({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:i,disablePhotoCommentSelection:y,isDesktopSheetModal:S=!1,isEligibleForPinReactions:x,isPDP:D,orbacSubjectId:E,pinId:L,privatePin:N,reactionByMe:P,reactionCounts:Z,setIsLoadingNewlyCreatedComment:O,showCommentComposer:j,showReactBackground:v,storyPinDataId:w,viewParameter:I}){let b;let k=(0,d.ZP)(),B=(0,g.Z)(),M=(0,o.I0)(),{logContextEvent:T}=(0,m.v)(),U=(0,s.Z)(),{showOneToast:z}=(0,p.F9)(),{inCommentFooterRedesignExp:H,closeupWithinMasonryEnabled:K,clientTrackingParams:R}=(0,A.x4)(),[W,F]=(0,n.useState)(!1),[J,G]=(0,n.useState)(r.A9.NONE);async function q(i){let{contentMarkdown:n,force:o,imageSignatures:a,tags:s}=i;if(null===e)return!1;O(!0);try{if(e){if(a.length){let t={aggregatedPinDataId:e,details:n,image_signatures:a,pin_id:L??"",username:B.username||"",fromUnifiedComment:!0};await M((0,h.DD)(t))}else await U({force:o,fromUnifiedComment:!0,objectType:f.o.pin,objectId:e,pinId:L,tags:s,text:n,orbacSubjectId:E});T({event_type:7,clientTrackingParams:R,object_id_str:L,aux_data:{num_user_mention_tags:(s?JSON.parse(s):[]).length,...w?{creator_id:t,story_pin_data_id:w}:{}}})}}catch(e){return[u.ky,u.LJ].includes((0,l.Z)(e,"api_error_code")??0)?G((0,l.Z)(e,"api_error_code")===u.ky?r.A9.WARNING:r.A9.BLOCK):z(({hideToast:t})=>(0,C.jsx)(c.ZP,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||k.bt("There was an issue posting your comment.", "There was an issue posting your comment.", "comment.post.errorMessage", undefined, true),type:"error"})),O(!1),!1}return F(!1),O(!1),!0}return b=D?K?2:8:K?1:0,(0,C.jsx)(a.xu,{marginEnd:b,marginStart:K?2:D?H?8:6:0,width:S?"100%":void 0,children:(0,C.jsx)(_.Z,{clientTrackingParams:R,commentCount:i,commentWarningModalState:J,disablePhotoCommentSelection:y,dismissCommentWarningModal:()=>G(r.A9.NONE),iconSize:D?20:void 0,isCloseup:K,isDesktopSheetModal:S,isEligibleForPinReactions:x,isLeftAligned:D,objectType:f.o.pin,onAddItem:q,onCancelItem:()=>F(!1),onEnter:()=>F(!0),pinId:L,privatePin:N,reactionByMe:P,reactionCounts:Z,showCommentComposer:j,showReactBackground:!D&&v,statusType:W?"textInflightCreation":"textStaticDisplay",viewParameter:I})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer.en_GB-da0359abf8817d96.mjs.map